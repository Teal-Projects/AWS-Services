h1. Description 

Amazon Virtual Privat Cloud lets you provision a logically isolated section of the Amazon Web Services cloud where you can launch AWS resources.

h1. Main Features 

h5. General :
* Launch instances into a subnet of your choosing
* Assign custom IP address ranges in each subnet
* Configure route tables between subnets
* Comes with a default network ACL, Allow all outbound and inbound traffic.
* Create internet gateway and attach it to our VPC
* Instance security groups
* Subnet network access control lists (ACLs). 1 Subnet = 1 availability Zone.

h5. Default VPC
* Is user friendly, allowing you to immediately deploy instances.
* All Subnet have a route out to the internet
* Each EC2 instance has both a public and privat IP address

h5. VPC Peering
* Allow you to connect one VPC with another via a direct network route using private IP addresses.
* VPC peering only routes traffic between source and destination VPCs. VPC peering does not support edge to edge routing.
* Instances behave as if they were on the same private network
* You can peer VPC's with other AWS accounts as well as with other VPCs in the same account.

h5. Netowork ACL
* By default new network ACL denies all inbound and outbound traffic until you add rules for both.
* Remember Network ACL are stateless
* Can block IP Addresses.
* Can associate Network ACL with multiple subnets.
* When you add a Network ACL to a subnet, the previous association is removed.

h5. Nat instances :
* When creating a NAT instance, Disable Source/Destination Check on the Instance.
* nat instances must be in a public subnet.
* There must be a route out of the private subnet to the NAT instance, in order for this to work.
* The amount of traffic that NAT instances can support depends on the instance size. If you are bottlenecking, increase the instance size.
* You can create high availability using Autoscaling Groups, multiple subnets in differents AZs, and a scritp to automate failover.
* Behind a Security Group.

h5. Nat Gateways
* Used to provide internet traffic to EC2 instance in a private subnets.
* Redundant inside the Availability Zone.
* Configure a Nat Gateway in each Availability Zone and configure your routing strategy for redundancy path to a Nat Gateway
* Preferred by the enterprise.
* Starts at 5Gbps and scales currently to 45Gbps.
* No need to patch
* Not associated with Security Groups.
* Automatically assigned a public ip address.
* Remember to update your route tables.
* No need to disable Source/Destination Checks

h5. Flow logs
* You can not enable flow logs for VPC that are peered with your VPC, unless the peer VPC is in your account.
* You can Tag flow logs
* You can not change the configuration of a flow logs after is creation
	* IP traffic who are not monitored :
* Traffic generated by instance contacting Amazon DNS is not logged. Your own DNS yes.
* From a Windows instances
* traffic from 169.254.169.254 (instance metadata).
* DHCP
* Traffic tothe reserved IP address fdor the default VPC router.

h5. Bastion host :
* Used to securely administer EC2 instances (Using SSH or RDP). Bastions are called Jump Boxes in Australia.
* You cannot use a NAT Gateway as a Bastion host.

h5. Direct connect:
* Connect directly your Datacenter to AWS. That can reduce your network cost.
* Useful for high throughput workload
* Or if you need a stable and reliable secure connection.
* Creation steps :
	* Create a virtual interface in the direct Connect console. This is a PUBLIC Virtual Interface.
	* Got to the VPC consol and then to VPN connections. Create a Customer Gateway.
	* Create a Virtual Private Gateway.
	* Attach the Virtual Privat Gateway to the desired VPC
	* Select VPN COnnections and create new VPN Connection.
	* Select the Virtual Private Gateway and the Customer Gateway.
	* Once the VPN is available, setup the VPN on the customer gateway or firewall.

h5. Global Accelerator:
* A service that can improve availabitiy and performance of your applications for local and gllobal users.
* You are assigned two static IP addresses (or alternatively you can bring your own).
* You can control traffic using traffic dials. This is done within the endpoint group.

h5. VPC Endpoint :
* Are virtual devices and are horizontally scaled.
* Allow communication between instances in your VPC and services without imposign availability risks or bandwidth constraints on your network traffic.
* Two types :
	* Interface Endpoint
	* Gateway Endpoints
		* Let a Instance in a privat SN to access to an S3 or DDB.
		* Does not leave Amazon Network
		* Can be applicate for S3 and DynamoDB

h1. Cost Strategies 
 
https://aws.amazon.com/vpc/pricing/

h1. Service constrains 
